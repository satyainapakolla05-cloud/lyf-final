{"version":3,"names":["FDBDatabase","FDBOpenDBRequest","FDBVersionChangeEvent","cmp","Database","enforceRange","AbortError","VersionError","FakeEvent","queueTask","waitForOthersClosedDelete","databases","name","openDatabases","cb","anyOpen","some","openDatabase2","_closed","_closePending","delete","deleteDatabase","request","db","get","undefined","deletePending","connections","filter","connection","event","newVersion","oldVersion","version","dispatchEvent","openDatabase3","err","runVersionchangeTransaction","_runningVersionchangeTransaction","_rawDatabase","otherDatabase","waitForOthersClosed","anyOpen2","transaction","objectStoreNames","result","readyState","_rollbackLog","push","addEventListener","openDatabase","set","FDBFactory","_databases","Map","source","error","DOMException","message","bubbles","cancelable","eventPath","event2","open","arguments","length","TypeError","Promise","resolve","database","toString"],"sourceRoot":"../../../../../lib","sources":["internal/web/memidb/FDBFactory.js"],"mappings":"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","ignoreList":[]}
