{"version":3,"names":["FDBTransaction","ConstraintError","InvalidAccessError","InvalidStateError","NotFoundError","TransactionInactiveError","FakeDOMStringList","FakeEventTarget","ObjectStore","queueTask","validateKeyPath","confirmActiveVersionchangeTransaction","database","_runningVersionchangeTransaction","transactions","_rawDatabase","filter","tx","mode","transaction","length","_state","closeConnection","connection","_closePending","transactionsComplete","every","_closed","connections","otherConnection","FDBDatabase","constructor","rawDatabase","push","name","version","objectStoreNames","Array","from","rawObjectStores","keys","sort","createObjectStore","options","undefined","TypeError","keyPath","autoIncrement","has","isArray","_rollbackLog","objectStore","get","deleted","_scope","delete","rawObjectStore","_push","_sort","add","set","deleteObjectStore","store","objectStoreName","_objectStoresCache","storeNames","hasActiveVersionchange","some","db","storeName","contains","processTransactions","close","toString"],"sourceRoot":"../../../../../lib","sources":["internal/web/memidb/FDBDatabase.js"],"mappings":"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","ignoreList":[]}
